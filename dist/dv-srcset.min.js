/**
 * dv.srcset
 * https://github.com/diegovilar/dv.srcset
 *
 * @version 0.9.0-alpha.1
 * @license BSD
 */
!function(a){"use strict";function b(a,b){return Math.floor(Math.random()*(b-a+1))+a}function c(a){return[].slice.call(a,0)}function d(a){return parseInt(a,10)===a&&a>=0}function e(a){return parseFloat(a)===a&&a>=0}function f(d,e,f,g){function h(){return d.innerHeight||e[0].documentElement.clientHeight}function j(){return d.innerWidth||e[0].documentElement.clientWidth}function m(a,b){var e;return function(){d.clearTimeout(e),e=d.setTimeout(b.apply(this,c(arguments)),a)}}var n=d.devicePixelRatio||1,o=j(),q=h(),r={};return a.element(d).bind("resize",m(10,function(){var a,b=j(),c=h();if(b!=o||c!=q){o=b,q=c;for(a in r)r.hasOwnProperty(a)&&r[a]()}})),{restrict:"AC",link:function(a,c,d){var e,h=b(k,l),j=f(d[i]),s=(d.src||"").trim(),t=m(20,function(a){var b=a?a.url:p;b!=c.attr("src")&&c.attr("src",b)});a.$watch(j,function(a){a=((a||"")+"").trim(),s&&(a=s+" 1x,"+a),e=g(a),t(e.get(o,q,n))},!0),r[h]=function(){t(e.get(o,q,n))},a.$on("$destroy",function(){r.hasOwnProperty(h)&&delete r[h]})}}}function g(){function b(a){var b,d,e,f,g,j,k,l,m=[];if(null!=a){a=(a+"").replace(i," ").trim(),b=a.split(",");a:for(g=0;g<b.length;g++)if(d=b[g].trim(),k=d.indexOf(" "),k>1&&(f=d.substring(0,k).trim(),e=c(d.substring(k+1))),!(1>k)&&e&&f.length){for(e.url=f,j=0;j<m.length;j++)if(l=m[j],l.w===e.w&&l.h===e.h&&l.x===e.x)continue a;m.push(e)}}return new h(m)}function c(a){var b,c,d,e,f,g,h=(a+"").replace(i," ").split(" ");for(f=0;f<h.length;f++)if(g=h[f],e=j.exec(g)){if(null!=b)return null;b=parseFloat(e[1])}else if(e=k.exec(g)){if(null!=c)return null;c=parseInt(e[1],10)}else{if(!(e=l.exec(g)))return null;if(null!=d)return null;d=parseInt(e[1],10)}return null==b&&null==c&&null==d?null:(b=null==b?m:b,c=null==c?n:c,d=null==d?o:d,{w:c,h:d,x:b})}function f(a,b,c){var d,e,f=0,g=[];for(d=0;d<a.length;d++)e=a[d],e[b]<c&&g.push(d),e[b]>f&&(f=e[b]);if(g.length<a.length)for(d=g.length-1;d>=0;d--)a.splice(g[d],1);else for(d=a.length-1;d>=0;d--)a[d][b]<f&&a.splice(d,1)}function g(a,b){var c,d,e=1/0;for(c=0;c<a.length;c++)d=a[c],d[b]<e&&(e=d[b]);for(c=a.length-1;c>=0;c--)a[c][b]>e&&a.splice(c,1)}function h(a){this._c=a}var i=/\s+/,j=/^([0-9]*\.?\d+)x$/,k=/^(\d+)w$/,l=/^(\d+)h$/;return h.prototype={get:function(b,c,h){var i=a.copy(this._c);if(!i||!i.length)return null;if(!d(b)||!d(c)||!e(h))throw new TypeError("First and second arguments need to be non-negative integers, and third argument need to be a non-negative float.");return f(i,"w",b),f(i,"h",c),f(i,"x",h),g(i,"w"),g(i,"h"),g(i,"x"),i[0]}},b}var h="dv.srcset",i="dvSrcset",j="dvSrcsetParser",k=1e9,l=9999999999,m=1,n=1/0,o=1/0,p="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",q=a.module(h,[]);q.directive(i,["$window","$document","$parse",j,f]),q.factory(j,g)}(angular);